export{a as HTMLContenteditableMaskElement,H as HTMLMaskElement,I as InputMask}from"../_/ac6d4d14.js";import{_ as e,a as t,b as r,c as s,d as n,e as i,I as u,f as o,g as l,h as p}from"../_/63a41bea.js";export{I as default}from"../_/63a41bea.js";import{M as k,C as d,n as h}from"../_/bb1aabfa.js";export{M as Masked}from"../_/bb1aabfa.js";import{c as v}from"../_/c3346b95.js";export{M as MaskedPattern,c as createMask}from"../_/c3346b95.js";export{default as MaskedEnum}from"./masked/enum.js";export{default as MaskedRange}from"./masked/range.js";export{default as MaskedNumber}from"./masked/number.js";export{default as MaskedDate}from"./masked/date.js";export{default as MaskedRegExp}from"./masked/regexp.js";export{default as MaskElement}from"./controls/mask-element.js";var f=function(a){e(MaskedFunction,a);var u=t(MaskedFunction);function MaskedFunction(){r(this,MaskedFunction);return u.apply(this,arguments)}s(MaskedFunction,[{key:"_update",value:
/**
      @override
      @param {Object} opts
    */
function _update(e){e.mask&&(e.validate=e.mask);n(i(MaskedFunction.prototype),"_update",this).call(this,e)}}]);return MaskedFunction}(k);u.MaskedFunction=f;var m=["compiledMasks","currentMaskRef","currentMask"];var y=function(a){e(MaskedDynamic,a);var u=t(MaskedDynamic);
/**
    @param {Object} opts
  */function MaskedDynamic(e){var t;r(this,MaskedDynamic);t=u.call(this,Object.assign({},MaskedDynamic.DEFAULTS,e));t.currentMask=null;return t}s(MaskedDynamic,[{key:"_update",value:function _update(e){n(i(MaskedDynamic.prototype),"_update",this).call(this,e);"mask"in e&&(this.compiledMasks=Array.isArray(e.mask)?e.mask.map((function(e){return v(e)})):[])}},{key:"_appendCharRaw",value:function _appendCharRaw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=this._applyDispatch(e,t);this.currentMask&&a.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t)));return a}},{key:"_applyDispatch",value:function _applyDispatch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value;var r=this.rawInputValue;var s=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:r;var n=r.slice(s.length);var i=this.currentMask;var u=new d;var o=null===i||void 0===i?void 0:i.state;this.currentMask=this.doDispatch(e,Object.assign({},t));if(this.currentMask)if(this.currentMask!==i){this.currentMask.reset();if(s){var c=this.currentMask.append(s,{raw:true});u.tailShift=c.inserted.length-a.length}n&&(u.tailShift+=this.currentMask.append(n,{raw:true,tail:true}).tailShift)}else this.currentMask.state=o;return u}},{key:"_appendPlaceholder",value:function _appendPlaceholder(){var e=this._applyDispatch.apply(this,arguments);this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder());return e}},{key:"_appendEager",value:function _appendEager(){var e=this._applyDispatch.apply(this,arguments);this.currentMask&&e.aggregate(this.currentMask._appendEager());return e}},{key:"currentMaskFlags",value:function currentMaskFlags(e){var t,a;return Object.assign({},e,{_beforeTailState:(null===(t=e._beforeTailState)||void 0===t?void 0:t.currentMaskRef)===this.currentMask&&(null===(a=e._beforeTailState)||void 0===a?void 0:a.currentMask)||e._beforeTailState})}},{key:"doDispatch",value:function doDispatch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(e,this,t)}},{key:"doValidate",value:function doValidate(e){return n(i(MaskedDynamic.prototype),"doValidate",this).call(this,e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}},{key:"doPrepare",value:function doPrepare(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=h(n(i(MaskedDynamic.prototype),"doPrepare",this).call(this,e,t)),r=o(a,2),s=r[0],u=r[1];if(this.currentMask){var c;var l=h(n(i(MaskedDynamic.prototype),"doPrepare",this).call(this,s,this.currentMaskFlags(t)));var p=o(l,2);s=p[0];c=p[1];u=u.aggregate(c)}return[s,u]}},{key:"reset",value:function reset(){var e;null===(e=this.currentMask)||void 0===e?void 0:e.reset();this.compiledMasks.forEach((function(e){return e.reset()}))}},{key:"value",get:function get(){return this.currentMask?this.currentMask.value:""},set:function set(e){l(i(MaskedDynamic.prototype),"value",e,this,true)}},{key:"unmaskedValue",get:function get(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function set(e){l(i(MaskedDynamic.prototype),"unmaskedValue",e,this,true)}},{key:"typedValue",get:function get(){return this.currentMask?this.currentMask.typedValue:""},set:function set(e){var t=String(e);if(this.currentMask){this.currentMask.typedValue=e;t=this.currentMask.unmaskedValue}this.unmaskedValue=t}},{key:"isComplete",get:function get(){var e;return Boolean(null===(e=this.currentMask)||void 0===e?void 0:e.isComplete)}},{key:"isFilled",get:function get(){var e;return Boolean(null===(e=this.currentMask)||void 0===e?void 0:e.isFilled)}},{key:"remove",value:function remove(){var e=new d;if(this.currentMask){var t;e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch())}return e}},{key:"state",get:function get(){var e;return Object.assign({},n(i(MaskedDynamic.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(e){return e.state})),currentMaskRef:this.currentMask,currentMask:null===(e=this.currentMask)||void 0===e?void 0:e.state})},set:function set(e){var t=e.compiledMasks,a=e.currentMaskRef,r=e.currentMask,s=p(e,m);this.compiledMasks.forEach((function(e,a){return e.state=t[a]}));if(null!=a){this.currentMask=a;this.currentMask.state=r}l(i(MaskedDynamic.prototype),"state",s,this,true)}},{key:"extractInput",value:function extractInput(){var e;return this.currentMask?(e=this.currentMask).extractInput.apply(e,arguments):""}},{key:"extractTail",value:function extractTail(){var e,t;for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return this.currentMask?(e=this.currentMask).extractTail.apply(e,r):(t=n(i(MaskedDynamic.prototype),"extractTail",this)).call.apply(t,[this].concat(r))}},{key:"doCommit",value:function doCommit(){this.currentMask&&this.currentMask.doCommit();n(i(MaskedDynamic.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function nearestInputPos(){var e,t;for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return this.currentMask?(e=this.currentMask).nearestInputPos.apply(e,r):(t=n(i(MaskedDynamic.prototype),"nearestInputPos",this)).call.apply(t,[this].concat(r))}},{key:"overwrite",get:function get(){return this.currentMask?this.currentMask.overwrite:n(i(MaskedDynamic.prototype),"overwrite",this)},set:function set(e){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}},{key:"eager",get:function get(){return this.currentMask?this.currentMask.eager:n(i(MaskedDynamic.prototype),"eager",this)},set:function set(e){console.warn('"eager" option is not available in dynamic mask, use this option in siblings')}},{key:"maskEquals",value:function maskEquals(e){return Array.isArray(e)&&this.compiledMasks.every((function(t,a){var r;return t.maskEquals(null===(r=e[a])||void 0===r?void 0:r.mask)}))}},{key:"typedValueEquals",value:function typedValueEquals(e){var t;return Boolean(null===(t=this.currentMask)||void 0===t?void 0:t.typedValueEquals(e))}}]);return MaskedDynamic}(k);y.DEFAULTS={dispatch:function dispatch(e,t,a){if(t.compiledMasks.length){var r=t.rawInputValue;var s=t.compiledMasks.map((function(s,n){s.reset();s.append(r,{raw:true});s.append(e,t.currentMaskFlags(a));var i=s.rawInputValue.length;return{weight:i,index:n}}));s.sort((function(e,t){return t.weight-e.weight}));return t.compiledMasks[s[0].index]}}};u.MaskedDynamic=y;var g={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function createPipe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.MASKED;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.MASKED;var r=v(e);return function(e){return r.runIsolated((function(r){r[t]=e;return r[a]}))}}function pipe(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return createPipe.apply(void 0,a)(e)}u.PIPE_TYPE=g;u.createPipe=createPipe;u.pipe=pipe;try{globalThis.IMask=u}catch(e){}export{y as MaskedDynamic,f as MaskedFunction,g as PIPE_TYPE,createPipe,pipe};

